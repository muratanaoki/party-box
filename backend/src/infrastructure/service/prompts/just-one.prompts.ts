/**
 * Just One ゲーム用のAIプロンプト定数
 */

// カテゴリ一覧（お題生成用）
export const TOPIC_CATEGORIES = [
  "動物園にいる動物",
  "海の生き物",
  "ペットとして飼える動物",
  "日本の観光地",
  "世界の有名な場所",
  "スポーツ",
  "楽器",
  "乗り物",
  "職業",
  "日本の行事・イベント",
  "家電製品",
  "キッチン用品",
  "文房具",
  "おもちゃ・ゲーム",
  "服・ファッション",
  "アニメ・漫画のキャラクター",
  "映画・ドラマ",
  "お菓子・スイーツ",
  "和食",
  "洋食",
  "飲み物",
  "果物",
  "野菜",
  "花",
  "木",
  "虫",
  "鳥",
  "天気・自然現象",
  "体の部位",
  "感情",
  "色",
  "形",
  "日用品",
  "家具",
  "建物",
  "お店の種類",
  "学校にあるもの",
  "公園にあるもの",
  "病院にあるもの",
  "夏に関係するもの",
  "冬に関係するもの",
  "お正月に関係するもの",
  "クリスマスに関係するもの",
];

// フォールバック用のお題一覧
export const FALLBACK_TOPICS = [
  "りんご",
  "電車",
  "猫",
  "太陽",
  "学校",
  "傘",
  "カレー",
  "海",
  "時計",
  "本",
  "桜",
  "雨",
  "犬",
  "月",
  "山",
  "パン",
  "ドラえもん",
  "ピカチュウ",
  "アンパンマン",
  "サンタクロース",
];

// システムプロンプト
export const SYSTEM_PROMPTS = {
  GENERATE_TOPIC: "日本語の名詞を1つだけ出力。説明や句読点は不要。単語のみ。",
  VALIDATE_FORMAT: "1単語チェッカー。JSON出力のみ。",
  VALIDATE_AGAINST_TOPIC: "JSON出力のみ",
  JUDGE_HINTS: "JSON出力のみ",
  JUDGE_ANSWER: "JSON出力のみ",
};

// ユーザープロンプトテンプレート関数
export const USER_PROMPTS = {
  generateTopic: (
    category: string,
    randomNum: number,
    excludeTopics: string[]
  ): string => {
    const excludeNote =
      excludeTopics.length > 0
        ? `\n絶対に使わないで: ${excludeTopics.slice(-50).join("、")}`
        : "";

    return `「${category}」から連想される単語を1つだけ出力。
条件:
- 小学生でも知ってる一般的な単語
- 定番すぎない（犬、猫、りんご等は避ける）
- ランダムシード: ${randomNum}
${excludeNote}
単語のみ出力:`;
  },

  validateFormat: (hint: string): string => `「${hint}」は1単語ですか？

## OKな例（1単語として認める）
- 名詞、形容詞、動詞: 「猫」「赤い」「走る」
- 固有名詞: 「ピカチュウ」「東京タワー」「スターバックス」
- 複合語: 「目覚まし時計」「携帯電話」

## NGな例（1単語ではない）
- 助詞付き: 「猫の」「りんごは」「海へ」「友達と」
- 助動詞付き: 「赤いです」「走ります」
- 2語以上: 「とても甘い」「大きな犬」
- 文章: 「りんごは赤い」

JSON形式: {"valid":true/false,"error":"NGの場合の理由"}`,

  validateAgainstTopic: (topic: string, hint: string): string =>
    `お題「${topic}」とヒント「${hint}」は翻訳または表記違い？

【無効＝翻訳・表記違い】
- 表記違い: 猫=ねこ=ネコ、林檎=りんご
- 翻訳: 犬=dog=ドッグ、海=sea=シー、霧=mist=ミスト、家=home=ホーム、車=car=カー、りんご=apple=アップル

【有効＝翻訳ではない】
- 連想語・関連語は有効: 海→波、犬→ペット、りんご→果物、屋根→家、屋根→ホーム
- 上位/下位カテゴリは有効: ピカチュウ→ポケモン、犬→動物

質問: ヒント「${hint}」はお題「${topic}」の翻訳または表記違いか？
{"valid":true/false,"error":"理由"}`,

  judgeHints: (hintTexts: string): string => `ヒント重複チェック:
${hintTexts}

重複=両方無効、重複じゃない=両方有効

【重複の定義】文中で置き換えても意味が同じになるもの
重複の例:
- 表記違い: 猫=ねこ、林檎=りんご
- 完全な同義語: 車=自動車、大きい=でかい、美しい=綺麗
- 翻訳: 犬=dog、家=house

【重複ではない】品詞が違う、または意味が異なるもの
重複じゃない例:
- 品詞違い: 暑い(形容詞)≠夏(名詞)、走る(動詞)≠速い(形容詞)
- 関連語: 海≠波、犬≠ペット、りんご≠果物
- 派生語: 王子≠王女、教師≠生徒

迷ったら重複じゃない。{"results":[{"index":1,"valid":true/false}...]}`,

  judgeAnswer: (topic: string, answer: string): string =>
    `お題「${topic}」に回答「${answer}」は正解？

正解: 同じ意味（表記違い/ひらがな/カタカナ/漢字OK）
例: 財布=さいふ=サイフ、りんご=リンゴ=林檎

不正解: 別の単語

{"correct":true/false,"reason":"理由"}`,
};
